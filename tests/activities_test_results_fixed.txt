==== Testing /api/activities endpoints ====
==== GET http://localhost/Kingsway/api/activities/index ====
"{\"status\":\"success\",\"message\":\"Success\",\"data\":{\"message\":\"Activities API is running\"},\"code\":200,\"timestamp\":\"2025-12-02T12:32:09+03:00\",\"request_id\":\"req_692eb219bd6ec\"}"
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities ====
{"status":"success","message":"Success","data":[{"id":2,"title":"Staff Team Building","description":"Annual staff team building retreat","category_id":2,"start_date":"2025-12-10","end_date":"2025-12-12","status":"planned","max_participants":null,"started_by":null,"created_at":"2025-11-29 15:02:34","target_audience":"staff","category_name":"Test Category","category_description":null,"participant_count":0,"resource_count":0,"active_participants":"0"},{"id":1,"title":"Football Club","description":"Weekly football training","category_id":1,"start_date":"2025-11-29","end_date":"2026-03-01","status":"planned","max_participants":null,"started_by":null,"created_at":"2025-11-29 13:59:15","target_audience":"students","category_name":"Updated Category","category_description":null,"participant_count":3,"resource_count":1,"active_participants":"2"}],"code":200,"timestamp":"2025-12-02T12:32:10+03:00","request_id":"req_692eb21a12748"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== PUT http://localhost/Kingsway/api/activities ====
{"status":"error","message":"Activity ID is required for update","data":null,"code":400,"timestamp":"2025-12-02T12:32:10+03:00","request_id":"req_692eb21a6c19a"}
HTTP_STATUS:400
==== DELETE http://localhost/Kingsway/api/activities?id=1 ====
{"status":"error","message":"Activity ID is required for deletion","data":null,"code":400,"timestamp":"2025-12-02T12:32:10+03:00","request_id":"req_692eb21a82239"}
HTTP_STATUS:400
==== GET http://localhost/Kingsway/api/activities/upcoming-list ====
{"status":"success","message":"Success","data":[{"id":2,"title":"Staff Team Building","description":"Annual staff team building retreat","category_id":2,"start_date":"2025-12-10","end_date":"2025-12-12","status":"planned","max_participants":null,"started_by":null,"created_at":"2025-11-29 15:02:34","target_audience":"staff","category_name":"Test Category","participant_count":0,"days_until_start":8}],"code":200,"timestamp":"2025-12-02T12:32:10+03:00","request_id":"req_692eb21a97f11"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/statistics-get ====
{"status":"success","message":"Success","data":{"total_activities":2,"planned":"2","ongoing":"0","completed":"0","cancelled":"0"},"code":200,"timestamp":"2025-12-02T12:32:10+03:00","request_id":"req_692eb21ad4205"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/statistics-get?id=1 ====
{"status":"success","message":"Success","data":{"total_activities":2,"planned":"2","ongoing":"0","completed":"0","cancelled":"0"},"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21b0e0e5"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/categories-list ====
{"status":"success","message":"Success","data":[{"id":3,"name":"Sports","description":"All sports activities","is_active":1,"status":"active","created_at":"2025-11-29 11:17:44","department_id":null,"activity_count":0,"total_participants":0},{"id":2,"name":"Test Category","description":null,"is_active":1,"status":"active","created_at":"2025-11-28 20:30:36","department_id":null,"activity_count":1,"total_participants":0},{"id":1,"name":"Updated Category","description":null,"is_active":1,"status":"active","created_at":"2025-11-28 20:29:29","department_id":null,"activity_count":1,"total_participants":2}],"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21b24910"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/categories-get?id=1 ====
{"status":"success","message":"Success","data":{"id":1,"name":"Updated Category","description":null,"is_active":1,"status":"active","created_at":"2025-11-28 20:29:29","department_id":null,"activity_count":1,"total_participants":2,"planned_activities":"2","ongoing_activities":"0","completed_activities":"0"},"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21b3e900"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/categories-create ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== PUT http://localhost/Kingsway/api/activities/categories-update ====
{"status":"success","message":"Category updated successfully","data":null,"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21b70f32"}
HTTP_STATUS:200
==== DELETE http://localhost/Kingsway/api/activities/categories-delete?id=1 ====
{"status":"error","message":"Category ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21b9a3c4"}
HTTP_STATUS:400
==== GET http://localhost/Kingsway/api/activities/categories-statistics ====
{"status":"success","message":"Success","data":[{"id":2,"name":"Test Category","total_activities":1,"total_participants":0,"planned":"1","ongoing":"0","completed":"0","latest_activity_date":"2025-12-10"},{"id":1,"name":"Updated Category","total_activities":1,"total_participants":2,"planned":"2","ongoing":"0","completed":"0","latest_activity_date":"2025-11-29"},{"id":3,"name":"Sports","total_activities":0,"total_participants":0,"planned":"0","ongoing":"0","completed":"0","latest_activity_date":null}],"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21bad083"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/categories-toggle-status ====
{"status":"success","message":"Category deactivated successfully","data":{"is_active":0},"code":200,"timestamp":"2025-12-02T12:32:11+03:00","request_id":"req_692eb21bd2597"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/participants-list ====
{"status":"success","message":"Success","data":[{"id":1,"activity_id":1,"student_id":101,"joined_at":"2025-11-29 15:09:56","status":"withdrawn","role":null,"notes":" | Withdrawn: Transferred school","admission_no":"ADM101","first_name":"John","last_name":"Doe","class_name":"Grade 6","stream_name":"Grade 6","activity_title":"Football Club","category_name":"Updated Category"},{"id":2,"activity_id":1,"student_id":102,"joined_at":"2025-11-29 15:09:56","status":"active","role":null,"notes":null,"admission_no":"ADM102","first_name":"Jane","last_name":"Smith","class_name":"Grade 6","stream_name":"Grade 6","activity_title":"Football Club","category_name":"Updated Category"},{"id":3,"activity_id":1,"student_id":103,"joined_at":"2025-11-29 15:09:56","status":"active","role":null,"notes":null,"admission_no":"ADM103","first_name":"Ali","last_name":"Omondi","class_name":"Grade 6","stream_name":"Grade 6","activity_title":"Football Club","category_name":"Updated Category"}],"code":200,"timestamp":"2025-12-02T12:32:12+03:00","request_id":"req_692eb21bf3714"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/participants-get?id=1 ====
{"status":"success","message":"Success","data":{"id":1,"activity_id":1,"student_id":101,"joined_at":"2025-11-29 15:09:56","status":"withdrawn","role":null,"notes":" | Withdrawn: Transferred school","admission_no":"ADM101","first_name":"John","last_name":"Doe","class_name":"Grade 6","stream_name":"Grade 6","activity_title":"Football Club","activity_description":"Weekly football training","start_date":"2025-11-29","end_date":"2026-03-01","category_name":"Updated Category"},"code":200,"timestamp":"2025-12-02T12:32:12+03:00","request_id":"req_692eb21c22ad3"}
HTTP_STATUS:200
==== PUT http://localhost/Kingsway/api/activities/participants-update-status ====
{"status":"error","message":"Participant ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:12+03:00","request_id":"req_692eb21c4e9d1"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/participants-withdraw ====
{"status":"error","message":"Participant is already withdrawn","code":500}
HTTP_STATUS:500
==== GET http://localhost/Kingsway/api/activities/participants-student-history?student_id=1 ====
{"status":"success","message":"Success","data":[],"code":200,"timestamp":"2025-12-02T12:32:12+03:00","request_id":"req_692eb21c798c0"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/participants-participation-stats?student_id=1 ====
{"status":"error","message":"Activity ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:12+03:00","request_id":"req_692eb21c9a733"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/participants-bulk-register ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== GET http://localhost/Kingsway/api/activities/resources-list ====
{"status":"success","message":"Success","data":[{"id":1,"activity_id":1,"resource_name":"Football Ball","resource_type":"Ball","resource_url":null,"created_at":"2025-11-29 13:59:16","activity_title":"Football Club","start_date":"2025-11-29","end_date":"2026-03-01","category_name":"Updated Category"}],"code":200,"timestamp":"2025-12-02T12:32:13+03:00","request_id":"req_692eb21d73868"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/resources-get?id=1 ====
{"status":"success","message":"Success","data":{"id":1,"name":"Updated Resource","activity_id":1,"resource_name":"Football Ball","resource_type":"Ball","resource_url":null,"created_at":"2025-11-29 13:59:16","type":null,"quantity":null,"status":null,"cost":null,"activity_title":"Football Club","start_date":"2025-11-29","end_date":"2026-03-01","activity_status":"planned","category_name":"Updated Category"},"code":200,"timestamp":"2025-12-02T12:32:13+03:00","request_id":"req_692eb21dc6651"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/resources-add ====
{"status":"error","message":"Field 'resource_name' is required","code":500}
HTTP_STATUS:500
==== PUT http://localhost/Kingsway/api/activities/resources-update ====
{"status":"success","message":"Resource updated successfully","data":null,"code":200,"timestamp":"2025-12-02T12:32:14+03:00","request_id":"req_692eb21e1ee02"}
HTTP_STATUS:200
==== DELETE http://localhost/Kingsway/api/activities/resources-delete?id=1 ====
{"status":"error","message":"Resource ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:14+03:00","request_id":"req_692eb21e451c6"}
HTTP_STATUS:400
==== GET http://localhost/Kingsway/api/activities/resources-by-activity?activity_id=1 ====
{"status":"success","message":"Success","data":{"resources":[{"id":1,"name":"Updated Resource","activity_id":1,"resource_name":"Football Ball","resource_type":"Ball","resource_url":null,"created_at":"2025-11-29 13:59:16","type":null,"quantity":null,"status":null,"cost":null}],"summary":{"total_items":1,"total_quantity":0,"total_cost":0,"by_type":{"":{"count":1,"quantity":0,"cost":0}}}},"code":200,"timestamp":"2025-12-02T12:32:14+03:00","request_id":"req_692eb21e81558"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/resources-check-availability?resource_id=1&resource_type=Ball&start_date=2025-12-01&end_date=2025-12-02 ====
{"status":"success","message":"Success","data":{"all_resources":[],"conflicting_bookings":[],"date_range":{"start":"2025-12-01","end":"2025-12-02"}},"code":200,"timestamp":"2025-12-02T12:32:14+03:00","request_id":"req_692eb21ea54c9"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/resources-statistics ====
{"status":"success","message":"Success","data":[{"resource_type":"Ball","resource_count":1,"total_quantity":null,"total_cost":null,"activities_count":1,"avg_cost_per_resource":null}],"code":200,"timestamp":"2025-12-02T12:32:14+03:00","request_id":"req_692eb21ec3fb6"}
HTTP_STATUS:200
==== PUT http://localhost/Kingsway/api/activities/resources-update-status ====
{"status":"error","message":"Resource ID and status are required","data":null,"code":400,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21ee5339"}
HTTP_STATUS:400
==== GET http://localhost/Kingsway/api/activities/schedules-list ====
{"status":"success","message":"Success","data":[],"code":200,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21f20e07"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/schedules-get?id=1 ====
{"status":"error","message":"Schedule not found","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/schedules-create ====
{"status":"error","message":"Field 'day_of_week' is required","code":500}
HTTP_STATUS:500
==== PUT http://localhost/Kingsway/api/activities/schedules-update ====
{"status":"error","message":"Schedule not found","code":500}
HTTP_STATUS:500
==== DELETE http://localhost/Kingsway/api/activities/schedules-delete?id=1 ====
{"status":"error","message":"Schedule ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21f8d738"}
HTTP_STATUS:400
==== GET http://localhost/Kingsway/api/activities/schedules-by-activity?activity_id=1 ====
{"status":"success","message":"Success","data":[],"code":200,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21fa9eaa"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/schedules-weekly-timetable ====
{"status":"success","message":"Success","data":{"Monday":[],"Tuesday":[],"Wednesday":[],"Thursday":[],"Friday":[],"Saturday":[],"Sunday":[]},"code":200,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21fd7d59"}
HTTP_STATUS:200
==== GET http://localhost/Kingsway/api/activities/schedules-venue-availability?venue=Hall%20A&day_of_week=Monday&start_time=09:00&end_time=10:00 ====
{"status":"success","message":"Success","data":{"day_of_week":"Monday","time_range":{"start":"09:00","end":"10:00"},"occupied_venues":[]},"code":200,"timestamp":"2025-12-02T12:32:15+03:00","request_id":"req_692eb21fed7c9"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/schedules-bulk-create ====
{"status":"success","message":"Created 0 schedules successfully, 1 failed","data":{"successful":0,"failed":1,"successful_ids":[],"failed_details":[{"data":{"venue":"Field A","date":"2025-12-01","start_time":"15:00","end_time":"17:00","activity_id":1},"error":"Field 'day_of_week' is required"}]},"code":200,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb22011fdf"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/registration-initiate ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/registration-review ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb22068a08"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/registration-approve ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb220805b4"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/registration-reject ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb220a4940"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/registration-confirm ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb220c1393"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/registration-complete ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:16+03:00","request_id":"req_692eb220dac8d"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/planning-propose ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/planning-approve-budget ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:17+03:00","request_id":"req_692eb22124a58"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/planning-schedule ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:17+03:00","request_id":"req_692eb22144275"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/planning-prepare-resources ====
{"status":"error","message":"Workflow ID is required","data":null,"code":400,"timestamp":"2025-12-02T12:32:17+03:00","request_id":"req_692eb2216409c"}
HTTP_STATUS:400
==== POST http://localhost/Kingsway/api/activities/planning-execute ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/planning-review ====
{"status":"error","message":"There is no active transaction","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/competition-register ====
{"status":"error","message":"SQLSTATE[HY000]: General error: 1364 Field 'from_stage' doesn't have a default value","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/competition-prepare-team ====
{"status":"success","message":"Team prepared for competition","data":null,"code":200,"timestamp":"2025-12-02T12:32:17+03:00","request_id":"req_692eb221c624b"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/competition-record-participation ====
{"status":"success","message":"Participation recorded","data":null,"code":200,"timestamp":"2025-12-02T12:32:18+03:00","request_id":"req_692eb221f0038"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/competition-report-results ====
{"status":"success","message":"Results reported successfully","data":null,"code":200,"timestamp":"2025-12-02T12:32:18+03:00","request_id":"req_692eb2221cf64"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/competition-recognize-achievements ====
{"status":"success","message":"Competition workflow completed","data":{"status":"completed"},"code":200,"timestamp":"2025-12-02T12:32:18+03:00","request_id":"req_692eb22232ee8"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/evaluation-initiate ====
{"status":"error","message":"SQLSTATE[HY000]: General error: 1364 Field 'from_stage' doesn't have a default value","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/evaluation-submit-assessment ====
{"status":"error","message":"There is already an active transaction","code":500}
HTTP_STATUS:500
==== POST http://localhost/Kingsway/api/activities/evaluation-verify-assessment ====
{"status":"success","message":"Assessment verified","data":null,"code":200,"timestamp":"2025-12-02T12:32:19+03:00","request_id":"req_692eb2235121b"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/evaluation-approve ====
{"status":"success","message":"Evaluation approved","data":null,"code":200,"timestamp":"2025-12-02T12:32:19+03:00","request_id":"req_692eb223a24db"}
HTTP_STATUS:200
==== POST http://localhost/Kingsway/api/activities/evaluation-publish-results ====
{"status":"success","message":"Evaluation results published","data":{"status":"completed"},"code":200,"timestamp":"2025-12-02T12:32:20+03:00","request_id":"req_692eb223e63f0"}
HTTP_STATUS:200

==== All /api/activities endpoint tests completed ====
